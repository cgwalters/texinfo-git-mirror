2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/insertion.c (is_in_insertion_of_type): don't return the
	level, as it is not useful.
	(begin_insertion): instead of is_in_insertion_of_type, use
	float_active.

	* makeinfo/insertion.c (cm_example):
	* makeinfo/xml.c (xml_insert_docbook_image, xml_begin_multitable):
	insert empty label for @floats with no @anchor.

2003-11-24  Karl Berry  <karl@gnu.org>

	* doc/Makefile.am (EXTRA_DIST): remove no-longer-defined
	noinst_SCRIPTS.

2003-11-24  Akim Demaille  <akim@epita.fr>

	* configure.ac (HELP2MAN): Look for it.
	* doc/help2man: Remove.
	* doc/Makefile.am (HELP2MAN, noinst_SCRIPT): Remove.
	(common_mandeps): Don't depend on HELP2MAN which can be a complex
	command such as "missing --run help2man.

2003-11-24  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex: doc/\global fixes.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c: new command @listoffloats.

	* makeinfo/float.c (count_floats_of_type_in_chapter): only count
	floats with @anchors.
	(cm_listoffloats): new function.

	* makeinfo/insertion.c (end_insertion): do not prepend float type and
	number if no @anchors.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/xml.c:
	* makeinfo/xml.h: new element listoffloats.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.h: number sections by default.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_xref): if a reference is being made to a
	float with only one parameter, use the float number in HTML, and
	prepend it to the link in Info outputs.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/float.h:
	* makeinfo/float.c (get_float_ref): new function to retrieve a float's
	number by its id.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/insertion.c (end_insertion): indent the first paragraph
	after @float.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c: new commands @float and @caption.

	* makeinfo/insertion.h: new environment floatenv.

	* makeinfo/insertion.c (cm_float, cm_caption): new functions.
	(begin_insertion, end_insertion): handle floatenv.

	* makeinfo/xml.c:
	* makeinfo/xml.h: new elements float, floattype, caption, floattable,
	floatfigure, floatexample.

	* makeinfo/insertion.c (cm_example):
	* makeinfo/xml.c (xml_insert_docbook_image, xml_begin_multitable):
	insert label and id attributes, title element for docbook if used
	inside @float.

	* makeinfo/xml.c: replacements for multitable and informalfigure.
	(xml_insert_element_with_attribute): special-cased float element for
	docbook to make it appear in element stack and thus enable element
	replacements inside floatenv.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/float.c:
	* makeinfo/float.h: new files for float environment functions.

	* makeinfo/Makefile.am: added new files to makeinfo_SOURCES.

2003-11-24  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_xref): xstrdup the result from
	xml_get_assoc_for_id, as it gets freed later.

	* makeinfo/xml.c (xml_get_assoc_for_id, xml_associate_title_with_id):
	reimplemented unnumbered_labels handling.
	(xml_insert_docbook_image): Docbook expects format attribute values to
	be uppercase.

2003-11-23  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex: doc fix for multitable.
	* util/gendocs.sh: docbook support, from Simon Josefsson.

	* doc/texinfo.tex (\defttsl): new font.
	(\df): set ttsl too.
	(\deffngeneral,\deftypefngeneral,\deftypecvgeneral,
	 \deftypheader): call \ampdefunargs or \normaldefunargs.
	(\normaldefunargs): new macro, typesetting defun
	 args in ttsl (instead of sl).
	(\ampdefunargs): treat & specially and then call \normaldefunargs.
	(\defname): typeset defun name in tt (instead of bf).

	* doc/texinfo.tex: uniformly comment out eol with {% at macro
	starts.

2003-11-23  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/insertion.c (is_in_insertion_of_type): return the level
	where the insertion is found.

	* makeinfo/makeinfo.c (search_forward_until_pos): new function that
	sets search_forward boundary.
	(text_expansion): also reset docbook.

	* makeinfo/sectioning.h:
	* makeinfo/sectioning.c (current_chapter_number): new function that
	returns top level chapter numbers.
	(handle_enum_increment): always do the incrementation. but return
	strings conditionally.

	* makeinfo/xml.c: changed screen element's contained_in_para to 0 for
	Docbook. @lisp/@smalllisp create programlisting.
	(xml_insert_quotation): reimplemented quotation_stack handling.

2003-11-22  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\tocentry): same as \entry, no second 1pt of
	stretch.  And a couple doc fixes.

	* doc/texinfo.txi (Conventions): finally, get rid of @vskip
	-@baselineskip kludge, we handle index entries after @item's now.

2003-11-22  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.txi: use new @quotation feature.

	* texinfo.tex (\putwordDeftypevar, \putwordDeftypefun): Remove.
	* txi-cs.tex, txi-de.tex, txi-en.tex, txi-es.tex, txi-fr.tex,
	  txi-it.tex. txi-nl.tex, txi-no.tex, txi-pl.tex, txi-pt.tex,
	  txi-tr.tex: The same. 
	[texinfo-20031120-deftype-del.patch]

	* doc/texinfo.tex (\doverbatiminclude): just call \setupverbatim.
	(\setupverbatiminclude): remove.
	[texinfo-20031121-verbatim2.patch]
	
	* doc/texinfo.tex (\math): no need for \mathcode, and we actually
		can use $ not \implicitmath.
	[texinfo-20031121-math.patch]

	* doc/texinfo.tex (\zeroskipmacro): new macro, so we can
	check for true zero skip.
	(\dosubindsanitize): use it.
	[texinfo-20031120-zeroskip.patch]
	
	* doc/texinfo.tex (\doignore): scan in verbatim mode, so that
	@ can be ignored in @ignore text (as $@ occurs in make.texi).
	(\dodoignore): use \_STOP_ instead of \ST@P.
	[texinfo-20031120-zeroskip.patch]
	
	* doc/texinfo.tex (\defparsearg): new macro, to simplify places
	where the user macro just calls \parsearg.  Use it in many places.
	[texinfo-20031121-defparsearg.patch]
	
	* doc/texinfo.tex (\begin): remove, this is undocumented
	and unused.
	[texinfo-20031121-begin.patch]
	
	* doc/texinfo.tex (\author,\subtitle,\author): move to outer
	level (was inside \titlepage), for new \parsearg's sake.
	[texinfo-20031116-titlepage1.patch]
	
	* doc/texinfo.tex (\evenheadingxxx,\oddfootingyyy): might as well
		use \ and avoid changing catcode of @.
	[texinfo-20031116-catofat.patch]
	
	* doc/texinfo.tex (\set): use new \parseargusing macro.
	[texinfo-20031116-set.patch]
	
	* doc/texinfo.tex (\cartouche): force vertical mode, and avoid
	extra space from the @cartouche line itself.
	[texinfo-20031120-cart.patch]
	
	* doc/texinfo.tex (\ptexfootnote,\ptexinsert): save orig definitions.
	(\startsavinginserts): new macro (with relatives), call from
		\cartouche, \group, \table.
	[texinfo-20031118-saveins.patch]
	
	* doc/texinfo.tex (\table, \ftable, \vtable, \tablex, \tabley,
	\tablez): Cleaned up indentation, etc.
	(\kitem, \kitemx, \xitem, \xtemx, \description): Removed; they
	  didn't look as if they would work in their present state, anyway.
        [texinfo-20031114-table.patch]

	* doc/texinfo.tex (\filenamecatcodes): new macro.
	(\include,\verbatiminclude): use it, with new \parseargusing.
	(\pushthisfilestack,etc.): implement our own stack of filenames
	instead of reading the @include argument in a group.
	[texinfo-20031109-include.patch]
	
	* doc/texinfo.tex (\indexbreaks): remove, and remove call.
	(\entry): read arguments on the fly, to avoid fixing catcodes.
	[texinfo-20031121-indexbreaks.patch]
	
	* doc/texinfo.tex (\makevalueexpandable): new macro.
	Change occurrences of \let\value=\expandandable to use it,
	to reduce code duplication.
	[texinfo-20031121-value.patch]

	* doc/texinfo.tex (\parsedefunlineX,\defunchkspace,defunchktab,
	\defunloop,\defunchkfinish,\replaceeols): New macros.
	(\parsedefunline): start them off.  This is to support continuations
	lines for @defun headers.
	[texinfo-20031108-defun-cont.patch]
	
	* doc/texinfo.tex (\defun and all related commands):
	rewrite to use \parsearg and uniform command generation.
	[texinfo-20031120-defun.patch]
	
	* doc/texinfo.tex (=, \equalChar): remove active definition of =
	and hacks that printed = in \tt sometimes.  We want to print
	everything in \tt anyway, ultimately.
	[texinfo-20031120-defun-pres3.patch]
	
	* doc/texinfo.tex (\defopheader,\defcvarheader,defivarheader):
	use \code for the class name.
	[texinfo-defun-pres2.patch]
	
	* doc/texinfo.tex (\parsearg): Reset the catcode of space before
		we scan the argument; so we don't have to worry about
		obeyed spaces before and after the argument.
	(\parseargx, \parseargy): Nuke, it was wrong anyway--\obeyedspace,
	which is a macro, was compared with \temp which could have been let
	to an obeyed space, but it couldn't be a macro.
	(\removeactivespaces,\removeactivespacesX,\removeactivespacesY): Nuke.
	(\argremovespace): If the argument scanned by \parsearg end with
	a space, remove it.
	[texinfo-20031108-parsearg-space.patch]

	* doc/texinfo.tex: use \other and other symbolic names where possible,
	for clarity and efficiency. [texinfo-20031108-other.patch]

	* doc/texinfo.tex (\doverbatim): \xdef and \gobble, to avoid
		problems with active spaces. [texinfo-20031120-verbatim.patch]

	* doc/texinfo.tex (\quotationlabel): new macro to print label,
		with a \bf space.
	(\quotation): change call so \parsearg is at the end.
	[texinfo-20031118-quot.patch]

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_xref): removed the warning about
	@xrefs to @unnumbered sections, as there are many situations where
	there is no way to fix them.

	* makeinfo/insertion.c: removed lingering titlepage_cmd_present
	declaration.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c (cm_titlepage, cm_titlepage_cmds): moved to ...
	* makeinfo/insertion.c: here.

	* makeinfo/cmds.h (titlepage_cmd_present): moved to ...
	* makeinfo/makeinfo.h: here.

	* makeinfo/insertion.c (is_in_insertion_of_type): new function to
	query insertion_stack to see if we are inside a given insertion type.

	* makeinfo/makeinfo.h:
	* makeinfo/insertion.c (begin_insertion, end_insertion):
	* makeinfo/xml.c (xml_add_char):
	* makeinfo/xml.h: removed xml_in_copying and inside_titlepage_cmd
	global variables in favor of the new query function.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (discard_until, execute_string): reworded
	multiline related error messages.
	(discard_until): rollback input_text_offset only if not dealing with a
	multiline error, otherwise the same block gets in the way repeatedly.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/xml.h:
	* makeinfo/xml.c (xml_get_assoc_for_id, xml_associate_title_with_id):
	new functions.
	(xml_insert_indexentry): call execute_string(xref) instead of creating
	references directly.

	* makeinfo/makeinfo.c (cm_xref): check to see if xref is being made to
	an @unnumbered, and only one argument is given.  issue a warning, use
	@unnumbered's title as the third argument.

	* makeinfo/sectioning.c (sectioning_underscore): keep track of
	unnumbered sections, and their node names.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/sectioning.c (sectioning_underscore): for Docbook, always
	provide label attribute for chapter and unnumbered.
	(handle_enum_increment): simplified enumeration constraints, and
	changed to follow TeX way.  Moved marker handling to ...
	(cm_chapter, cm_unnumbered, cm_appendix): here.
	(cm_appendix): restart numbering.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/insertion.h:
	* makeinfo/insertion.c: new rawdocbook and rawxml insertion types to
	provide better block names in error messages (instead of "rawhtml" for
	everything.)
	(current_item_function, insertion_type_pname, find_type_from_name)
	(begin_insertion, end_insertion, discard_insertions, cm_docbook)
	(cm_xml, cm_item): honor new types.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_image): issue only a warning instead of an
	error when .txt file is unreadable, to better comply with the manual.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/sectioning.c (sectioning_underscore): insert label="" only
	when the output format is Docbook.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/insertion.c (cm_end): get rest of the line before returning
	in case of error, so the parameter to @end does not get leaked into
	the output document.

	* makeinfo/makeinfo.c (discard_until): when the expected string is not
	found, check to see if we are looking for @end, and if so issue a more
	descriptive error message.
	(execute_string): keep track of insertion stack to catch multiline
	commands where they are not allowed.
	Report from: Dumas Patrice <dumas@centre-cired.fr>, Wed, 18 Jun 2003
	09:41:56 +0200.

2003-11-21  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/multi.c (multitable_item): start <tbody> immediately if
	this a regular @item, and first in the table

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/footnote.c (output_pending_notes): always output footnotes
	with in_fixed_width_font = 0, so entity substitutions can take place.

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/footnote.c (cm_footnote, output_pending_notes): provide
	back link from footnote marker.

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/insertion.c (cm_insert_copying): remove blockquote from
	copying_text when inside bookinfo and the output format is Docbook.

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_value): return immediately instead of
	just suppressing bogus warnings.

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_value): do not issue bogus warnings about
	undefined values when @value is used inside a @menu environment, and
	the output format is Docbook.

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/sectioning.c (sectioning_underscore): use @settitle value
	if @top parameter is empty.

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/xml.c (xml_begin_index): make sure we are removing the
	label attribute and not something else.

2003-11-19  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/sectioning.c (get_sectioning_number): do not append space
	with Docbook.
	(sectioning_underscore): insert label attribute to make
	distinction between chapter and unnumbered in Docbook.
	(handle_enum_increment): also increment for Docbook.

	* makeinfo/xml.c (xml_begin_index): remove label attribute from index
	element.

2003-11-18  Karl Berry  <karl@gnu.org>

	* cmds.c (command_table): new commands @deftypecv, @deftypecvx.
	* defun.c, insertion.[ch], xml.c: implement them.

2003-11-18  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (execute_string): better para handling in case
	of nested executions.

2003-11-18  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (Multi-column Tables): include cmd name in
	section name.
	(Multitable Rows): use @headitem in example.

2003-11-17  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/xml.c (xml_begin_document): upgraded docbook DTD to Docbook
	XML 4.2.

	* makeinfo/makeinfo.c (cm_xref):
	* makeinfo/xml.c (xml_insert_docbook_image, xml_insert_indexentry)
	(xml_begin_multitable): close previously open-tag-only elements.

2003-11-17  Karl Berry  <karl@gnu.org>

	* bootstrap: honor environment variables.

2003-11-17  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (execute_string): end paragraphs if
	executing @copying text with xml.

	* makeinfo/xml.c: disallow nested quotations, legalnotice in abstract,
	and samp in var with Docbook.

2003-11-17  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/insertion.c (begin_insertion): keep @copying state.
	use legalnotice instead of abstract for @copying.
	(cm_insert_copying): removed redundant work arounds.

	* makeinfo/makeinfo.c (execute_string): try to keep tags balanced with
	Docbook and xml.

	* makeinfo/xml.c
	(xml_current_stack_index, xml_end_current_element): new functions.
	(xml_add_char): enclose @copying text in a quotation element with
	Docbook.

2003-11-17  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c (cm_settitle): do not automatically start bookinfo
	element after settitle.

2003-11-17  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/xml.c (xml_synindex): new function to keep track of index
	redirections.
	(xml_insert_indexterm): added a check to see if any index
	redirections are made.

	* makeinfo/index.c (cm_synindex): let xml_synindex() handle xml part.

2003-11-17  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_uref):
	* makeinfo/xml.c: use ulink for @uref with Docbook.

2003-11-16  Karl Berry  <karl@gnu.org>

	* util/install-info.c: protoize.
	* util/texindex.c: protoize.
	* util/dir-example (protoize,unprotoize): add.

	* doc/texinfo.tex (\everytab): new \toks.
	(\headitem): use it to typeset in bold.
	(\item): reset it.

2003-11-15  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (quotation): document it.
	* doc/texinfo.tex (\quotation): accept optional argument.
	(\doquotation): new macro to test for and typeset it.

	* doc/texinfo.txi (Multitable Rows): document @headitem.

	* doc/texinfo.tex (\headitem): error by default, redefine inside
	@multitable (= \dotable).  New command suggested by Arnold.

2003-11-15  Akim Demaille  <akim@epita.fr>

	* util/texi2dvi (fatal): New function. Use it.
	(txiversion): Be robust to broken texinfo.tex.

	* doc/texinfo.txi (example): mention use of @r for annotations.

2003-11-15  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c: new command @headitem.

	* makeinfo/insertion.c (cm_headitem): new function.

	* makeinfo/insertion.h: new variables to keep head item state.

	* makeinfo/multi.c (multitable_item, end_multitable):
	* makeinfo/xml.c (xml_end_multitable_row, xml_end_multitable):
	insert thead element if @headitem is used.
	
	* makeinfo/xml.h: new element THEAD.

	* makeinfo/texinfo.dtd: updated multitable structure.

	* NEWS: announced @headitem.

2003-11-14  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (cm_xref): make use of third and fifth arguments
	of @xref with Docbook.

	* makeinfo/xml.c: use Docbook citetitle for @cite.

2003-11-13  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex: doc fixes.

	* configure.ac, NEWS: autoconf 2.59.

2003-11-13  Akim Demaille  <akim@epita.fr>

	* configure.ac: Use AC_CHECK_DECLS, not txi_CHECK_DECLS.
	Also use # instead of dnl for comments.
	* acinclude.m4: Remove.

2003-11-14  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c (cm_noindent): output continued paragraphs with
	docbook and xml only when @noindent command is used.
	(cm_noindent_cmd): new function.  Patch from Arnold Robbins
	<arnold@skeeve.com>, 13 Nov 2003 15:43:02 +0200.

2003-11-11  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c (cm_i, cm_b, cm_r): do not use lineannotation if we
	are printing indices.

	* makeinfo/insertion.c (cm_insert_copying): removed unnecessary xml
	fix.

	* makeinfo/texinfo.dtd: added OElig and oelig entities.

2003-11-11  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c (cm_sp): disabled parameter expansion.

2003-11-10  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c:
	* makeinfo/insertion.c (cm_html): do not process @xml blocks.
	(cm_xml): new function to process @xml.

	* makeinfo/xml.c (xml_start_para, xml_end_para): skip para handling in
	footnote.
	(xml_insert_footnote): keep state in xml_in_footnote variable.

	* makeinfo/texinfo.dtd: updated settitle definition.

2003-11-10  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (Output Formats): rewrite to fix underfull
	boxes.

2003-11-10  Alper Ersoy  <dirt@gtk.org>

	* doc/texinfo.tex (\commondummies): added registeredsymbol.

2003-11-09  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/makeinfo.c (main): fixed a segfault with --html
	--no-header.

2003-11-09  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/html.c (html_output_head): output node name in title first.

2003-11-09  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/xml.c:
	* makeinfo/xml.h: new Docbook elements for quotation: tip, note,
	important, warning, caution.

	* makeinfo/xml.c: better font tags for Docbook.
	(xml_insert_quotation): new function that is aware of specialized
	Docbook elements for quotation.
	(xml_insert_entity): use add_char() instead of insert() for correct
	paragraph handling.

	* makeinfo/insertion.c (begin_insertion, end_insertion): use
	xml_insert_quotation() for quotations.
	(cm_quotation): removed quotation element insertion.
	(cm_insert_copying): also work around xml tags.

	* makeinfo/cmds.c (cm_b): really use bold with Docbook.

	* NEWS: @quotation changes.

2003-11-08  Karl Berry  <karl@gnu.org>

        * doc/texinfo.txi (registeredsymbol): new node.
        
	* doc/Makefile.am (HELP2MAN): invoke explicitly from $(srcdir), in
	case . is not in PATH.

	* configure.ac (AC_CONFIG_HEADERS): apparent AM_CONFIG_HEADERS is
	obsolete now, and we get to use AC_CONFIG_HEADERS again.

	* doc/texinfo.txi (Fonts): mention <lineannotation> feature in
	Docbook feature.

	* doc/texinfo.txi (itemx): warn not to use blank lines between
	@itemx's.

2003-11-08  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c (cm_i, cm_b, cm_r): for Docbook, use <lineannotation>
	in @example-like environments.
	(cm_r): For HTML use <span> to make sure we always get roman text.

	* makeinfo/xml.c:
	* makeinfo/xml.h: new docbook element <lineannotation>.  Added also to
	replace_elements to avoid nesting.

2003-11-08  Alper Ersoy  <dirt@gtk.org>

	* doc/texinfo.txi (Custom Headings): removed a newline that broke
	Docbook output.

	* NEWS:
	* makeinfo/cmds.c: new command @registeredsymbol

	* makeinfo/cmds.c (cm_registeredsymbol): new function.
	(cm_code): fixed in_fixed_width_font adjustment for XML and Docbook
	outputs.
	(cm_noindent, cm_indent): set xml_no_indent as well.

	* makeinfo/makeinfo.c (reader_loop): use entities for double quotes
	and dashes in HTML, XML and Docbook outputs.

	* makeinfo/multi.c (setup_multitable_parameters): convert
	@columnfractions to integer percentages (original code from Arnold
	Robbins <arnold@skeeve.com>.)
	(multitable_item, cm_tab): add width attribute to <td> element if
	@columnfractions is used.

	* makeinfo/texinfo.dtd: added an optional role attribute to para
	element (used for @noindent.)  New attributes ldquo, rdquo, ndash,
	mdash, registered.

	* makeinfo/xml.c: replaced repeated command element with more
	appropriate Docbook elements in docbook_element_list.
	(xml_start_para, xml_end_para): new functions to centralize paragraph
	handling.

	* makeinfo/xml.h: new variable xml_no_indent.

2003-11-07  Karl Berry  <karl@gnu.org>

	* bootstrap: run the various auto* tools we need instead of
		autoreconf, which copies in older versions of files.

	* doc/Makefile.am (texinfo): remove the special rule, it seems to
		be fixed.

	* Makefile.am (AUTOMAKE_OPTIONS): bump to 1.7.8.
	* doc/version.texi, doc/version-stnd.texi: cvs add these again,
	because with AM_MAINTAINER_MODE they are not created
	(unless --enable-maintainer-mode is given).

	* doc/Makefile.am (*.1) [MAINTAINER_MODE]: use this conditional
	instead of TEXINFO_MAINT, now that we have it.
	* configure.ac (TEXINFO_MAINT): no longer needed, since we call
	AM_MAINTAINER_MODE.

2003-11-06  Karl Berry  <karl@gnu.org>

	* bootstrap: ok, restore --force since it doesn't help Alper
	anyway.

	* AUTHORS: Silly syntax.
	* bootstrap: no --force, everything is considered obsolete then
	(thanks Alper).

2003-11-06  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/html.c (html_output_head): add <link> elements pointing to
	top, up, next, prev nodes when splitting output, and to top when not
	splitting.  Also provide a link to Texinfo homepage.
	(add_link): use nodename as title attribute.

2003-11-05  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/html.c (html_output_head): append node name to title if
	splitting.  Escape special chars in title.

	* makeinfo/node.c (cm_node): removed <link> elements from HTML node
	navigation <div> as they are only allowed in <head>.

2003-11-05  Alper Ersoy  <dirt@gtk.org>

	* doc/texinfo.txi (Installing Dir Entries): fixed @uref for Free
	Software Directory.
	(Command List): Escaped @/.

	* info/display.c (handle_tag, handle_tag_start, handle_tag_end): new
	functions.
	(display_update_one_window): ignore the text between magic
	tags/cookies.

	* makeinfo/cmds.c (cm_dots, cm_enddots): use insert_string() for HTML
	to avoid escaping.
	(cm_bullet): use entity name (bull) instead of number (149).

	* makeinfo/index.c (cm_printindex): escape expanded_index.

	* makeinfo/lang.c (cm_accent_generic_html): handle @dotless{i}
	correctly.
	(cm_special_char): use entity names for @OE (OElig) and @oe (oelig)
	instead of numbers.

	* makeinfo/node.c (cm_node): escape node names in HTML output.

	* makeinfo/xml.c (xml_id): check to see if the character is allowed.
	
	* makeinfo/tests/accent-text.txi: new @dotless{j} lines.

	* makeinfo/tests/accent: look for &acute;j instead of &acute;i.

	* TODO: removed item about @dotless in HTML output.

2003-11-04  Karl Berry  <karl@gnu.org>

	* util/Makefile.am (EXTRA_DIST): spurious space after trailing
	backslash.

	* configure.ac (AC_PREREQ): 2.58.

2003-11-03  Karl Berry  <karl@gnu.org>

	* util/Makefile.am (EXTRA_DIST): add gdoc.

2003-11-02  Karl Berry  <karl@gnu.org>

	* util/gendocs.sh: doc fix.

	* doc/texinfo.txi (Using Texinfo): merge most details into ...
	(Output Formats): ... this section.

	* util/dir-example (VM): add.

2003-11-01  Alper Ersoy  <dirt@gtk.org>

	* doc/texinfo.txi (Conditional Commands): Docbook text should
		really use @ifdocbook.

	* info/info.c (raw_escapes_p): 1 by default.
	(long_options): new option no-raw-escapes.
	* doc/info-stnd.texi (Invoking Info): document it.

2003-10-31  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/xml.c:
	* makeinfo/xml.h:
	* makeinfo/insertion.c (handle_verbatim_environment): use
	<![[CDATA...]]> for @verbatim in docbook output too.

2003-10-31  Karl Berry  <karl@gnu.org>

	* TODO: image scaling in html needed.
	* makeinfo/cmds.c (cm_strong): only give the warning if we're
	actually producing Info output.

	* makeinfo/cmds.c (cm_strong): reword message and check for only
	*Note:, not *Note:*.  From: Kevin Ryde <user42@zip.com.au>, 31 Oct
	2003 06:19:05 +1000.

2003-10-29  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (Def Cmd Template): shorten.
	* makeinfo/makeinfo.c: help message.
	* doc/texinfo.tex: version update.
	* makeinfo/texinfo.dtd: update copyright.

2003-10-28  Alper Ersoy  <dirt@gtk.org>

	* makeinfo/cmds.c: output correct elements for @command,
	@env, @file, @option and @samp commands, and also handle
	@titlepage in xml output.  New commands: @docbook,
	@ifdocbook and @ifnotdocbook for conditional docbook output.

	* makeinfo/defun.c (args_from_string): allow comma to be
	recognized as a separate token to help XML side of things.
	(process_defun_args): let xml.c handle xml output.

	* makeinfo/insertion.c: handle @verbatim properly when
	outputting xml.  This means: surround data with a <verbatim>
	block, use <![[CDATA ... ]]> and disable escaping.
	Recognize @titlepage, @docbook, @ifdocbook and
	@ifnotdocbook.
	(cm_insert_copying): do not trust the consistency of
	copying_text, because full_expansion doesn't let open
	docbook elements to be closed.
	(cm_item): generate correct index entries in xml output.

	* makeinfo/insertion.h: new insertion types: ifdocbook,
	ifnotdocbook, titlepage.

	* makeinfo/lang.c: notify language changes with
	@documentlanguage in xml output, using <documentlanguage
	xml:lang=".." /> elements.

	* makeinfo/makeinfo.c: trailing encoding settings in html
	output are commented.  Do not append any encoding settings
	to xml and docbook outputs.  Set process_docbook variable
	for @docbook, etc. and updated --help about it.
	(set):
	(clear): Output @set and @clear in xml so it's possible to
	pass variables to further processors.

	* makeinfo/makeinfo.h: process_docbook and
	inside_titlepage_cmd (to check validity of @author, @title,
	@subtitle, etc.)

	* makeinfo/sectioning.c: heading-only commands (@chaphading,
	etc.) do not start/end sections in xml output.  They are now
	equivalents of the title element.

	* makeinfo/toc.c: @contents and @shortcontents now appear in
	the output.

	* makeinfo/xml.c: changed element_list typedefs to also note
	whether an element is filled.  Prefilled elements get
	xml:space="preserve" attribute.  Added xml prolog.  Root element
	in xml output gets the document language like it does in
	docbook, but with xml:lang.  Removed indentation for xml
	output.  Also lines in paragraphs are joined.
	(xml_process_defun_args):
	(xml_begin_definition):
	(xml_end_definition):
	(xml_begin_def_term):
	(xml_end_def_term): functions to handle @def environments.

	* makeinfo/xml.h: new elements in xml_element enum:
	TITLEPAGE, AUTHOR, BOOKTITLE, BOOKSUBTITLE, COMMAND_TAG,
	ENV, FILE_TAG, OPTION, SAMP, CONTENTS, SHORTCONTENTS,
	DOCUMENTLANGUAGE, VERBATIM, SETVALUE, CLEARVALUE, DEF*.
	(Suffices of COMMAND_TAG and FILE_TAG are to avoid variable
	name clashes.)

	* makeinfo/texinfo.dtd: updated to reflect changes.

	* doc/texinfo.tex: skip @docbook and @ifdocbook.

2003-10-28  Karl Berry  <karl@gnu.org>

	* util/gendocs.sh: new -o option to specify output directory.

2003-10-27  Karl Berry  <karl@gnu.org>

	* lib/system.h (LC_MESSAGES): no longer needed according to
	Bruno, libintl.h defines it.
	Message of 16 Jul 2003 18:17:23 +0200.

2003-10-27  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\defname): be sure to declare the space
	  we get from \rightskip in the first line.
	  (\parsebodycommon): Be careful not to issue \medbreak after
	  \penalty 2000.
	  (\defxbodycommon): The penalty changed from 2000 to 3000;
	  it should be higher that the one in \parsebodycommon.
	  -- added "@c vim:sw=2:" near the end, for my comfort.

2003-10-27  Stepan Kasal  <kasal@ucw.cz>

	More cleanup of active chars in @defxx arguments:

	* doc/texinfo.tex (\opnr, \clnr): Reimplemented, ...
	  (\oprm, \clrm, \opnested, \ampnr): ... nuking these, and using ...
	  (\parenfont, \infirstlevel, \bfafterword): ... 3 new macros, ...
	  (\ifampseen): ... and a new \if.
	  (\brackcount): New count, to count also square braces, ...
	  (\lbrb, \rbrb): ... here.
	  (\checkparencounts): Macros to check whether both counts get back
          to 0; ...
	  (\badparencount, \badbrackcount): ... if not, issue an error
	  message and reset the respective count.
	  (\deftypefnheaderx): Don't call \normalparens, it has no effect.
	  (\defvarargs): Call \boldbrax instead of \normalparens.
	  (\normalparens): Nuked.

2003-10-26  Eli Zaretskii  <eliz@is.elta.co.il>

	* info/session.c (info_menu_or_ref_item): If point is before all
	the cross-references, use the first one as the default, instead of
	setting which to -1 and crashing.  (Patch originally sent 2000-10-09.)
	Debian bug 74278, reported from: Josip Rodin <joy@cibalia.gkvk.hr>,
	7 Oct 2000 19:44:24 +0200.

2003-10-26  Karl Berry  <karl@gnu.org>

	* configure.ac (AM_MAINTAINER_MODE): enable, to avoid lossage
	when Texinfo sources are imported into other
	repositories (NetBSD, TeX Live).
	Most recently suggested by Thomas Klausner
	<wiz@danbala.ifoer.tuwien.ac.at>, 9 Sep 2003 14:57:09 +0200.

	* makeinfo/node.c (validate_file): ensure tem1 && tem2 before
	running STREQ.  Report from: Akim Demaille <akim@epita.fr>,
	13 Oct 2003 10:43:10 +0200.

	* doc/Makefile.am (infokey.1): new target.
	(man_MANS): include infokey.1.
	Noticed this in Debian diff.
	
	* util/texi2dvi: check for tex up front; inspired by Debian diff.

	* TODO: makeinfo -E should do simple macro expansion, not
	validity checking (even syntax, for @tex processing).

	From: Stepan Kasal <kasal@ucw.cz>, 24 Oct 2003 19:10:02 +0200.
	Start at making makeinfo -E behave more like a macro preprocessor,
		avoiding consistency checks.
	* makeinfo/insertion.c (cm_menu,cm_detailmenu): avoid checks if
	macro_expansion_output_stream.
	* makeinfo/makeinfo.c (main): set validating=0 if
	macro_expansion_output_stream.

	* util/texi2dvi (comment_iftex_sed): don't think we need to
	comment out @ifhtml sections here, makeinfo will not expand them
	by default.

2003-10-25  Karl Berry  <karl@gnu.org>

	* info/info.c: --raw-escapes affects Info files, not just man
	pages.

	* doc/texinfo.tex: novalis doesn't like my clarification, so make
	it a special exception instead.

2003-10-24  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\defname): Cleanup of this macro.
	  (\boldbraxnoamp): Nuked, it's equivalent to \boldbrax;
	  the caller changed.
	  Other minor cleanups around active paretheses.
	  (\defunargs): After reporting the "Unbalanced paretheses" error,
	  reset the count.

2003-10-24  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (makeinfo advantages): mention that plain text
	--no-headers does --enable-encoding.

2003-10-23  Karl Berry  <karl@gnu.org>

	* makeinfo/macro.c (define_macro): write the macro definition
	itself to the output stream, to give texinfo.tex a chance at it.
	Report from: Akim Demaille <akim@epita.fr>, 22 Oct 2003 17:15:34
	+0200.

	* doc/texinfo.tex (\readauxfile): make the \openout\auxfile be
	\immediate, to avoid spurious terminal output from the
	\immediate's in \setref.

2003-10-23  Stepan Kasal  <kasal@ucw.cz>

	Rewrite \parsearg:
	* doc/texinfo.tex (\parsearg, \parseargusing): \parseargusing is
	  a new macro which works just like good old \parsearg but takes
	  one more parameter which contains code to be performed within
	  a group just before we slurp the rest of the line---typically,
	  some catcode chages go here.
	  (\parseargx): Insert an \empty token before the arg to be read,
	  to prevent loosing of braces.  (Thus @end{foo} no longer works.)
	  (\parseargline, \argremovecomment, \argremovec): Change the way
	  comments are stripped; do not use \toks0.
	  (\removeactivespaces): is now called directly from \parsearg (via
	  \parseargusing and \argremovec), and stripps only the trainling
	  active spaces, doesn't perform expansion.
	  (\finishparsearg): New macro, finishes \parsearg by nuking the
	  added \empty token.
	  (\end, \endxxx): Don't call \removeactivespaces, don't use \toks0;
	  because of efficiency, move the error handling to ...
	  (\badenderror): ... a new macro.
	  (\doverbatim): ``\end{verbatim}'' changed to ``\end verbatim.''

	Cleanup of various details with active spaces.
	  (\parseargx): Do the \futurelet and move the rest ...
	  (\parseargy): ... to a new macro;
	  (\parseargusing): caller changed;
	  (\parseargdiscardspace): the other caller nuked.
	  (\obeyedspace, \sepspaces, \unsepspaces): Move near to \parsearg.
	  (\obeyedspace): Is now a macro containing the active space.
	  (\unsepspaces): No longer makes spaces active.
	  (\ignoreactivespaces): Nuked, it's only appearance in ...
	  (\aliasxxx): ... replaced by direct code.

2003-10-23  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex: comments at top.

	* AUTHORS: add kama.  (kama's address is now khmarbaise@gmx.de.)

2003-10-21  Karl Berry  <karl@gnu.org>

	* util/gendocs.sh: revision of mohit's original.
	* util/Makefile.am (EXTRA_DIST): add gendocs.sh and
		gendocs_template.

2003-10-20  Karl Berry  <karl@gnu.org>

	* makeinfo/cmds.c (handle_include): only close_paragraph if
	!insertion_stack, else we get extra blank lines when
	used inside @example.
	* makeinfo/insertion.c (handle_verbatim_include): likewise, plus
		move the indentation around.
	Report from: Brian Gough <bjg@network-theory.co.uk>,
	20 Oct 2003 14:36:49 +0100.

	* makeinfo/makeinfo.c (close_paragraph): formatting changes to
		minimize lines.

	* makeinfo/insertion.c (end_insertion): for html output in the
	example/etc. case, kill_self_indent to get rid of
	leading whitespace.
	Report from: Brian Gough <bjg@network-theory.co.uk>,
	20 Oct 2003 14:36:49 +0100.

2003-10-16  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\shortcontbf): cmb10 scaled \magstep1, not cmb12,
	since cmb12 is not a standard font.
	Report from: Staszek Wawrykiewicz <staw@gust.org.pl>,
	16 Oct 2003 06:44:40 +0200.

2003-10-14  Karl Berry  <karl@gnu.org>

	* lib/xstrdup.c: put old version back, we're not ready for gnulib
	xmalloc yet.

	* makeinfo/insertion.c: undo xml_no_para change, it causes more
	problems than it solves, according to Alper (Ersoy, <dirt@gtk.org>).

2003-10-12  Karl Berry  <karl@gnu.org>

	* makeinfo/insertion.c (begin_insertion,end_insertion): in rawhtml
	case (also used for rawxml), increment and decrement xml_no_para.

	* makeinfo/lang.c (cm_documentencoding): force the normal (info)
	expansion when reading the arg, even when parsing xml/html/docbook.
	Report from: Kevin Ryde <user42@zip.com.au>,
	13 Oct 2003 10:02:23 +1000.

2003-10-09  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\chapterzzz,...,\unnumberedsubsubseczzz): make
	section number settings \global.  Otherwise, when chapters are
	@included, they are ineffective and every chapter is numbered 1.
	For instance, the Emacs and Elisp manuals.  Thanks to Stepan for
	analysis.

	* doc/texinfo.tex: add arch-tag for miles.

2003-10-08  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\onepageout): At the beginning of \shipout, call
	    \pdfdest directly, not via \pdfmkdest.
	  (\pdfmkdest): Call also \atdummies before \pdfdest.
	  (\donoderef): Remove the unsuccessful attempt to expand \lastnode
	    before passing it to \setref (it only expanded `{' twice);
	    things would screw up if \lastnode was expanded too much.
	  (\setref): Rewritten, don't call \atdummies, don't expand
	    \thissection.
	  (\dosetq, \internalsetq, \Ypagenumber, \Ytitle): Nuked.
	  (\chfplain): Remove referrence to \Ytitle from a comment.

2003-10-08  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex: spurious space and comment (from Stepan).

	* NEWS: automake 1.7.8.
	* util/dir-example: include netpbm.

2003-10-07  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\defbf, shortcontbf): use \bfshape instead of
	\bxshape, so we use cmb consistently instead of cmbx.

	* doc/texinfo.txi: more index entries for em/en dashes, fix
		capitalizations of cindex entries.

2003-10-07  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\defname): Don't use \ifempty.
	  (\ifempty): Nuke.

2003-10-06  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\dosubind, \doind): Cleanup, move code ...
	  (\dosubindwrite, \dosubindsanitize): ... to new macros,
	  (\emptymacro): and nuke this one.

	* doc/texinfo.tex (\Ypagenumber): Add `\noexpand,' so that ...
	  (\dosetq): ... doesn't have to redefine \folio.  Move \iflinks ...
	  (\setref): ... here.

2003-10-06  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\setdeffont): remove; this used DEF instead of
	def, and thus had no effect for some years, so
	clearly no one has been using it.  Noticed by Stepan.

2003-10-04  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi: document hyphen -> dash suppression in literal
	contexts, and verbatim commands not working inside other commands.
	Report from: Luc Teirlinck <teirllm@dms.auburn.edu>, 2 Oct 2003
	22:45:14 -0500,

	* doc/texinfo.tex (\commondummies,\indexnofonts): no-op @verb; I
	doubt this is sufficient to make @verb work in index entries etc.,
	but it's a start.  Analysis from: Andreas Schwab <schwab@suse.de>,
	02 Oct 2003 18:54:40 +0200.

2003-09-28  Karl Berry  <karl@gnu.org>

	* TODO: add item for conversion of non-texinfo manuals.

2003-09-26  Karl Berry  <karl@gnu.org>

	* CVSROOT/loginfo: back to log_accum.

	* doc/texinfo.tex (\parsebodycommon): increase \penalty between
        headers to 2000 from 0.
        (\defxbodycommon): check for 10002, not 1000.  We don't want to
	allow a page break after a section heading.  Hmm, but it seems
	this should never be called next after a section heading?

2003-09-25  Karl Berry  <karl@gnu.org>

	* makeinfo/cmds.c (cm_strong): warn if argument is exactly
	"Note:", since that conflicts with Info usage.  Suggestion from
	rms.

2003-09-24  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\dosubind): must propagate penalty after all,
	because we insert a non-discardable item (the whatsit), which
	makes following glue a breakpoint.  Now I understand (maybe).
	(\sectionheading): must end with \nobreak after
	all, purely to make \lastpenalty 10000 so future code can check
	that and avoid breaks.
	(\parsebodycommon): such as this code; don't do a
	\medbreak if lastpenalty >=10000.

	* doc/texinfo.tex (\tocindent): decrease to 2pc.
	(\{app,unn}sub{sub,}secentry): redefine so that they
	indent properly.

2003-09-23  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\dosubind): remove my misbegotten idea of
	propagating the penalty; all that did was increase the chance of a
	valid breakpoint.  Bug report from: Werner LEMBERG <wl@gnu.org>,
	23 Sep 2003 15:47:31 +0200.
	(\numhead,\apphead,\unnmhead): avoid spurious
	blank spaces, for cleanliness.

	* CVSROOT/loginfo: syncmail instead of external log_accum.
	* doc/texinfo.tex (\sectionheading): remove extraneous \nobreak,
	found by Stepan (of course).

2003-09-22  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\sectionheading): the space below a section
	  heading should have fixed size; \nobreak after a \vskip is
	  redundant.

2003-09-21  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\sectionheading): make space below be half of
	space above, and don't add \parskip to space above.  Suggestion
	from Han-Wen Nienhuys <hanwen@cs.uu.nl>, implementation ideas from
	Stepan Kasal <kasal@math.cas.cz>, 16 Sep 2003 11:30:43 +0200.

2003-09-21  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\dosuppressfirstparagraphindent): change the
	  redefinition of \indent and \noindent and factor out common
	  parts of all redefinitions to ...
	  (\restorefirstparagraphindent): ... a new macro.

2003-09-20  Karl Berry  <karl@gnu.org>

	* makeinfo/macro.c (cm_alias): do not expand when calling
	get_until_in_line, since xml/docbook expansion is empty.
	Report from: Richard Kreuter <kreuter@anduril.rutgers.edu>,
	17 Sep 2003 17:59:58 -0400.

	* info/signals.c: Clear the screen when exiting from a SIGQUIT.
	From: Wojciech Polak <polak@gnu.org>, 19 Sep 2003 10:27:28 +0200.

2003-09-16  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\sectionheading): there is no need to insert
	  \nobreak before a kern which is not followed by
	  a glue.  Such a kern is not a permissible breakpoint.

2003-09-16  Simon Law <sfllaw@uwaterloo.ca>

	* doc/texinfo.tex (\dosuppressfirstparagraph): Gobble \noindent
	if it occurs in the first paragraph.
	(\ptexnoindent): for saving/restoring \noindent in @tex.
	(\footnote): Neutralise the effect of @noindent within a footnote.

2003-09-16  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex: Changes to make pdf references go to the correct
	place on the page.  This is most easily testable
	at high magnifications (I used 400% and 800%).
	(\output): put \the\pageno pdfdest at very
	beginning of \shipout.(\dopdfoutline): new macro.
	(\pdfmakeoutlines): recompute all section numbers.
	(\unnumberedno): \newcount.
	(\chapterzzz,\appendixzzz,\unnumberedzzz,
	 ..., \unnumberedsubsubseczzz): abstract common
	elements, keep track of numbering for everything.
	(\doheading,\dosubheading,\dosubsubheading): call
	\sectionheading directly instead of \plain*secheading.
	(\chfplain, \sectionheading): take additional section type
	argument; call \writetocentry and \donoderef.  
	(\unnchfopen): mention this is deprecated.
	(\writetocentry): handle "omit" case, and
	\global\pdfmakepagedesttrue.
	(\startcontents, \summarycontents): sectioning
	commands take an extra arg.
	(\dosub*secentry): take extra arg with section
	number; change callers.
	(\pdfcatalog): move this call to the opening PDF
	commands, for clarity.
	(\unnumbnoderef): no longer needed, collapsed into
	\donoderef.(\Yomitfromtoc): new xref constant.
	(\Ynumbered,\Yappendix): renamed from
	\Ysectionnumberedandtype and
	\Yappendixletterandtype, for clarity.

	* doc/texinfo.txi (cartouche): omit invalid @group.

	* makeinfo/node.c (cm_node): restore accesskey= on the <link>s.
	From hanwen.

2003-09-15  Karl Berry  <karl@gnu.org>

	* util/dir-example: add guile-tut.

	* info/session.c (info_follow_menus): take the first best_guess
	rather than the last.
	From: Rob Browning <rlb@defaultvalue.org>,
	15 Sep 2003 01:26:17 -0500.

2003-09-13  Karl Berry  <karl@gnu.org>

	* automake 1.7.7.

	* makeinfo/insertion.c (begin_insertion): start cartouche html output
	with <p>.  @cartouche can't be used meaningfully
	within a paragraph.
	Report from: Simon Josefsson <jas@extundo.com>,
	11 Sep 2003 19:25:20 +0200.

2003-09-12  Karl Berry  <karl@gnu.org>

	* makeinfo/tests/html-manuals: include -I../../doc for case when
	version-stnd.texi is in build tree.
	From: ezra peisach <epeisach@med-xtal.bu.edu>, 
	12 Sep 2003 13:53:32 -0400.

2003-09-11  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (Cartouche): document that @cartouche needs to
		be outside the @example for HTML output to work.  This
		is painful to fix in the current makeinfo.
	Report from: Simon Josefsson <jas@extundo.com>,
	11 Sep 2003 15:21:44 +0200.

2003-09-10  Karl Berry  <karl@gnu.org>

	* makeinfo/sectioning.c (section_alist): add entry for centerchap,
	so at least makeinfo does not bomb out.  (No centering is actually
	done.)  From: Denys Duchier <duchier@ps.uni-sb.de>, 10 Sep 2003
	21:35:24 +0200.

	* lib/system.h: __CYGWIN__ in comments, too.

2003-09-09  Karl Berry  <karl@gnu.org>

	* bootstrap: --include=m4.  From Werner.

2003-09-08  Karl Berry  <karl@gnu.org>

	* lib/system.h: make that __CYGWIN__, not __unix__.  From Eli.
	* lib/system.h (DEFAULT_TMPDIR,PATH_SEP) [O_BINARY && !__unix__]:
	new case for cygwin, from: Thomas Klausner
	<wiz@danbala.ifoer.tuwien.ac.at>, 8 Sep 2003 13:43:29 +0200
	(for cross-building netbsd).

2003-09-04  Karl Berry  <karl@gnu.org>

	* texinfo.txi (Conventions): say more about quotations and dashes,
	based on a report to help-texinfo from
        David.Billinghurst@riotinto.com, 18 Jul 2003 16:07:00 +1000.

	* NEWS: mention @tex/@iftex are executed in a group.

2003-09-03  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (Macro Details): mention some makeinfo
	limitations too, from recent bug reports by Patrice Dumas
	<dumas@centre-cired.fr> and (16 Jul 2003 17:21:56 +0200) Jesper
	Harder <harder@ifa.au.dk>.
	* makeinfo/macro.c (define_macro): "end rmacro" is 10 chars long.

2003-08-29 Reiner Steib <Reiner.Steib@gmx.de>
	
	* makeinfo/lang.c (encoding_table): Downcase coding system
	names, since Emacs does not recognize the uppercase names.

	* makeinfo/lang.h: doc fixes.

2003-08-28  Karl Berry  <karl@gnu.org>

	* bootstrap: new file (cvs only).
	* README.dev: mention it.
	Report from hanwen@cs.uu.nl, sample script from
	Akim Demaille <akim@epita.fr>.
	* aclocal.m4: remove from cvs repository.

2003-08-26  Karl Berry  <karl@gnu.org>

	* makeinfo/node.c (cm_node): add <LINK> tags. This will produce a
	navigation bar in Mozilla 1.4 (and perhaps earlier).  Original
	code from Han-Wen Nienhuys <hanwen@cs.uu.nl>.

2003-08-23  Karl Berry  <karl@gnu.org>

	* util/texi2dvi: Run tex --help in $tmpdir, to avoid leaving
	texput.log for old TeX versions.  Report from Patrick Welche
	<prlw1@newn.cam.ac.uk>, patch from Akim.

2003-08-20  Karl Berry  <karl@gnu.org>

	* makeinfo/defun.c (cm_defun): skip @ifset/@ifclear insertions
	when looking for the @defun going with this @defunx.  Report from:
	Akim Demaille <akim@epita.fr>, 14 Aug 2003 12:10:37 +0200.

	* makeinfo/insertion.c (cm_end): rewrite error message for
	clarity.

2003-08-13  Karl Berry  <karl@gnu.org>

	* info/indices.c (info_index_apropos): correct typo, whoses ->
	whose.  From: Jesper Harder <harder@ifa.au.dk>, 13 Aug 2003
	14:49:26 +0200.

2003-08-11  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex: excise spurious spaces, etc.

2003-08-09  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi: don't use @ifinfo/@heading construct to replace
	@section any more, the XML output is wrong.

	* doc/texinfo.tex (\pdfmakeoutlines): doc fixes, and use \def once
	instead of \let twice.

	* doc/texinfo.txi: rewrite @ifinfo text sections to take better
	 account of HTML.  Suggestion from: Dumas Patrice
	<dumas@centre-cired.fr>, 8 Aug 2003 17:19:22 +0200.

2003-08-07  Derek Price  <derek@ximbiot.com>

	* makeinfo/insertion.c (cm_direntry): Skip @direntry in --no-headers
	mode.

2003-08-05  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (Beginning a File, title, titlefont): more
	clarifications.  Suggestions from Patrice.

	* doc/texinfo.txi (emph & strong): inconsistent source & example.
	From Jesper Harder.

2003-08-04  Karl Berry  <karl@gnu.org>

	* doc/texinfo.txi (titlefont): discuss html output a bit.
	Suggestion from Patrice.

2003-07-31  Karl Berry  <karl@gnu.org>

	* doc/texinfo.tex (\doignorecount): no need to initialize.
	(\doignoreyyy): doc fix.
	From Stepan.

2003-07-29  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\doignorecount): No need to initialize the
	  count while reading texinfo.tex.
	  (\doignoreyyy): Tiny comment change.

2003-07-28  Karl Berry  <karl@gnu.org>

	* makeinfo/html.c (process_css_file): @c (for @charset) should
	also put us into import_state.

	* doc/texinfo.txi (Conditional Nesting): new section; also change
	other conditional sections slightly.

	* doc/texinfo.tex (\doignoretext, \doignoretextyyy): Only look for
	conditionals at the beginning of a line, to avoid problems with a
	commented conditional.  Fix from: Stepan Kasal
	<kasal@math.cas.cz>, 28 Jul 2003 02:50:41 +0200.

2003-07-27  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\doignore): Rewritten to handle nesting.
	  (\ignoremorecommands, \obstexwarn, \ifwarnedobs): No longer needed.
	  (\nestedignore): No longer needed.
	  (\readauxfile): Remove reference to \warnedobstrue.

2003-07-27  Karl Berry  <karl@gnu.org>

	* util/dir-example: lowercase automake.

2003-07-26  Karl Berry  <karl@gnu.org>

	* makeinfo/html.c (process_css_file): in null_state, only consider
	@i to be the start of an @import, since @media can get misparsed.
	Report from: Dumas Patrice <dumas@centre-cired.fr>, 22 Jul 2003
	12:13:29 +0200.

2003-07-25    <karl@gnu.org>

	* doc/texinfo.txi (Raise/lower sections): mention difficulties with
	node pointer creation and top nodes.
	Report from: Dumas Patrice <dumas@centre-cired.fr>,
	22 Jul 2003 13:08:24 +0200.

2003-07-24    <karl@gnu.org>

	* makeinfo/sectioning.c (what_section): take additional SECNAME
		argument; change callers.
	* makeinfo/sectioning.h (what_section): remove redundant decl.
	* makeinfo/node.c (cm_node): change what_section call here, too.
	Report from: Dumas Patrice <dumas@centre-cired.fr>,
	22 Jul 2003 13:09:19 +0200.

	* doc/texinfo.tex (\doheading,\dosubheading,\dosubsubheading):
	rationalize names.
	(\heading,\subheading,\subsubheading): change
	calls.  (yesterday's patch called the undefined
	\subsecheadingyyy, etc.)

2003-07-23  Stepan Kasal  <kasal@ucw.cz>

	* doc/texinfo.tex (\heading, \subheading, \subsubheading): Call
	  \suppressfirstparagraphindent after setting the heading.
	  (\headingyyy, \subheadingyyy, \subsubheadingyyy): New macros.
	  (\chapheadingzzz): Call \suppressfirstparagraphindent at the end
	  and move \chapbreak ...
	  (\chapheading): ... here.
	  (\majorheading): Do a modified \chapbreak, then call \chapheadingzzz.
	  (\majorheadingzzz): Deleted.

2003-07-16    <karl@gnu.org>

	* doc/texinfo.txi (makeinfo Pointer Creation): must pxref Menus,
	since Menu Location is not a valid xref point for
	TeX, because of the special @heading stuff.

	* makeinfo/insertion.c (begin_insertion): lack of */ caused
	display: and smalldisplay: cases to be ignored.

	* lib/system.h (LC_MESSAGES) [!defined (HAVE_LC_MESSAGES) &&
	!defined (LC_MESSAGES)]: change conditional.  Report from
	Christian Krackowizer <ckrackowiz@std.schuler-ag.com>, 16 Jul 2003
	14:40:30 +0200.

2003-07-14    <karl@gnu.org>

	* util/install-info.c (ensure_dirfile_exists): replace literal ^_ with
	\x1f.  Report from Trond Endrestl
	<trond@ramstind.gtf.ol.no>, 14 Jul 2003 13:31:29 +0200.

	* makeinfo/sectioning.c (sectioning_html): forgot to change closing </hN>
	to match opening <hN> (that is, maximum h3).
	Report from: Jesper Harder <harder@ifa.au.dk>,
	14 Jul 2003 15:04:04 +0200.

2003-07-03    <karl@gnu.org>

	* doc/info.texi: copy from Emacs (with revisions by Luc).

2003-07-02   Akim Demaille  <akim@epita.fr>

	* util/texi2dvi: Add thumbpdf support.
	Use FD 6 instead of /dev/null so that when --debugging, the output
	from auxiliary tools can be observed.

2003-07-02    <karl@gnu.org>

	* doc/texinfo.txi (kbd): document actual makeinfo behavior.

2003-07-01    <karl@gnu.org>

	* doc/texinfo.txi (Menus): require that menus come at the end of the
	node, since Info readers can't determine the end
	of a menu.
	Report from: Luc Teirlinck <teirllm@dms.auburn.edu>,
	29 Jun 2003 21:33:19 -0500.

	* makeinfo/insertion.c (begin_insertion): do not increment
	in_fixed_width_font for @display or @format; this
	incorrectly caused quotes to be omitted in @kbd
	output in those environments.
	Report from: Luc Teirlinck <teirllm@dms.auburn.edu>,
	26 Jun 2003 21:59:48 -0500.

2003-06-24    <karl@gnu.org>

	* doc/texinfo.txi (tex): misplaced period.
	From: Jesper Harder <harder@ifa.au.dk>.
	(GNU Sample Texts): don't end the $Id index entries with a :.
	Report from: Luc Teirlinck <teirllm@dms.auburn.edu>.
	
2003-06-20    <karl@gnu.org>

	* makeinfo/defun.c (process_defun_args): only insert the HTML
	start/end tags if we're actually generating html.
	Report from: Shawn Betts <sabetts@sfu.ca>, 12 Jun 2003
	16:48:50 -0700.

	* TODO: support translated manuals, from polak@gnu.org.

	* doc/texinfo.txi: Edit Options node no longer exists in the Emacs
		manual.  From: Luc Teirlinck <teirllm@dms.auburn.edu>.

2003-06-18    <karl@gnu.org>

	* config.{guess,sub}, install-sh, lib/xalloc.h: update from gnulib.

2003-06-10    <karl@gnu.org>

	* version 4.6.


Copying and distribution of this file, with or without modification,
are permitted in any medium without royalty provided the copyright
notice and this notice are preserved.


Local Variables:
mode: indented-text
left-margin: 8
fill-column: 76
version-control: never
End:
