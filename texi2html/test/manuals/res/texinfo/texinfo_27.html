<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- This manual is for GNU Texinfo (version 4.2, 28 March 2002),
a documentation system that can produce both online information and a
printed manual from a single source.

Copyright (C) 1988, 90, 91, 92, 93, 95, 96, 97, 98, 99, 2000, 01, 02
Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.  A copy of the license is
included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have freedom to copy and modify
this GNU Manual, like GNU software.  Copies published by the Free
Software Foundation raise funds for GNU development."

 -->
<!-- Created on a sunny day by texi2html
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>GNU Texinfo 4.2: F. Formatting Mistakes</title>

<meta name="description" content="GNU Texinfo 4.2: F. Formatting Mistakes">
<meta name="keywords" content="GNU Texinfo 4.2: F. Formatting Mistakes">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Catching-Mistakes"></a>
<a name="Formatting-Mistakes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="texinfo_26.html#Custom-Headings" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Debugging-with-Info" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo_26.html#Headings" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h1 class="appendix">F. Formatting Mistakes</h1>
<a name="index-Structure_002c-catching-mistakes-in"></a>
<a name="index-Nodes_002c-catching-mistakes"></a>
<a name="index-Catching-mistakes"></a>
<a name="index-Correcting-mistakes"></a>
<a name="index-Mistakes_002c-catching"></a>
<a name="index-Problems_002c-catching"></a>
<a name="index-Debugging-the-Texinfo-structure"></a>

<p>Besides mistakes in the content of your documentation, there are two
kinds of mistake you can make with Texinfo: you can make mistakes with
@-commands, and you can make mistakes with the structure of the nodes
and chapters.
</p>
<p>Emacs has two tools for catching the @-command mistakes and two for
catching structuring mistakes.
</p>
<p>For finding problems with @-commands, you can run TeX or a region
formatting command on the region that has a problem; indeed, you can
run these commands on each region as you write it.
</p>
<p>For finding problems with the structure of nodes and chapters, you can use
<kbd>C-c C-s</kbd> (<code>texinfo-show-structure</code>) and the related <code>occur</code>
command and you can use the <kbd>M-x Info-validate</kbd> command.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#makeinfo-Preferred">&bull; makeinfo Preferred</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          <code>makeinfo</code> finds errors.
</td></tr>
<tr><td align="left" valign="top"><a href="#Debugging-with-Info">F.1 Catching Errors with Info Formatting</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         How to catch errors with Info formatting.
</td></tr>
<tr><td align="left" valign="top"><a href="#Debugging-with-TeX">F.2 Catching Errors with TeX Formatting</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">          How to catch errors with TeX formatting.
</td></tr>
<tr><td align="left" valign="top"><a href="#Using-texinfo_002dshow_002dstructure">F.3 Using <code>texinfo-show-structure</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  How to use <code>texinfo-show-structure</code>.
</td></tr>
<tr><td align="left" valign="top"><a href="#Using-occur">F.4 Using <code>occur</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                 How to list all lines containing a pattern.
</td></tr>
<tr><td align="left" valign="top"><a href="#Running-Info_002dValidate">F.5 Finding Badly Referenced Nodes</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">       How to find badly referenced nodes.
</td></tr>
</table>

<a name="makeinfo-Preferred"></a>
<a name="makeinfo-Find-Errors"></a>
<h2 class="heading"><code>makeinfo</code> Find Errors</h2>

<p>The <code>makeinfo</code> program does an excellent job of catching errors
and reporting them&mdash;far better than <code>texinfo-format-region</code> or
<code>texinfo-format-buffer</code>.  In addition, the various functions for
automatically creating and updating node pointers and menus remove
many opportunities for human error.
</p>
<p>If you can, use the updating commands to create and insert pointers
and menus.  These prevent many errors.  Then use <code>makeinfo</code> (or
its Texinfo mode manifestations, <code>makeinfo-region</code> and
<code>makeinfo-buffer</code>) to format your file and check for other
errors.  This is the best way to work with Texinfo.  But if you
cannot use <code>makeinfo</code>, or your problem is very puzzling, then you
may want to use the tools described in this appendix.
</p>
<hr size="6">
<a name="Debugging-with-Info"></a>
<a name="Catching-Errors-with-Info-Formatting"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Debugging-with-TeX" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">F.1 Catching Errors with Info Formatting</h2>
<a name="index-Catching-errors-with-Info-formatting"></a>
<a name="index-Debugging-with-Info-formatting"></a>

<p>After you have written part of a Texinfo file, you can use the
<code>texinfo-format-region</code> or the <code>makeinfo-region</code> command to
see whether the region formats properly.
</p>
<p>Most likely, however, you are reading this section because for some
reason you cannot use the <code>makeinfo-region</code> command; therefore, the
rest of this section presumes that you are using
<code>texinfo-format-region</code>.
</p>
<p>If you have made a mistake with an @-command,
<code>texinfo-format-region</code> will stop processing at or after the
error and display an error message.  To see where in the buffer the
error occurred, switch to the &lsquo;<samp>*Info Region*</samp>&rsquo; buffer; the cursor
will be in a position that is after the location of the error.  Also,
the text will not be formatted after the place where the error
occurred (or more precisely, where it was detected).
</p>
<p>For example, if you accidentally end a menu with the command <code>@end
menus</code> with an &lsquo;s&rsquo; on the end, instead of with <code>@end menu</code>, you
will see an error message that says:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">@end menus is not handled by texinfo
</pre></td></tr></table>

<p>The cursor will stop at the point in the buffer where the error
occurs, or not long after it.  The buffer will look like this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">---------- Buffer: *Info Region* ----------
* Menu:

* Using texinfo-show-structure::  How to use
                                  `texinfo-show-structure'
                                  to catch mistakes.
* Running Info-Validate::         How to check for
                                  unreferenced nodes.
@end menus
&lowast;
---------- Buffer: *Info Region* ----------
</pre></td></tr></table>

<p>The <code>texinfo-format-region</code> command sometimes provides slightly
odd error messages.  For example, the following cross reference fails to format:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">(@xref{Catching Mistakes, for more info.)
</pre></td></tr></table>

<p>In this case, <code>texinfo-format-region</code> detects the missing closing
brace but displays a message that says &lsquo;<samp>Unbalanced parentheses</samp>&rsquo;
rather than &lsquo;<samp>Unbalanced braces</samp>&rsquo;.  This is because the formatting
command looks for mismatches between braces as if they were
parentheses.
</p>
<p>Sometimes <code>texinfo-format-region</code> fails to detect mistakes.  For
example, in the following, the closing brace is swapped with the
closing parenthesis:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">(@xref{Catching Mistakes), for more info.}
</pre></td></tr></table>

<p>Formatting produces:
</p><table><tr><td>&nbsp;</td><td><pre class="example">(*Note for more info.: Catching Mistakes)
</pre></td></tr></table>

<p>The only way for you to detect this error is to realize that the
reference should have looked like this:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">(*Note Catching Mistakes::, for more info.)
</pre></td></tr></table>

<p>Incidentally, if you are reading this node in Info and type <kbd>f
&lt;RET&gt;</kbd> (<code>Info-follow-reference</code>), you will generate an error
message that says:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">No such node: &quot;Catching Mistakes) The only way &hellip;
</pre></td></tr></table>

<p>This is because Info perceives the example of the error as the first
cross reference in this node and if you type a &lt;RET&gt; immediately
after typing the Info <kbd>f</kbd> command, Info will attempt to go to the
referenced node.  If you type <kbd>f catch &lt;TAB&gt; &lt;RET&gt;</kbd>, Info
will complete the node name of the correctly written example and take
you to the &lsquo;Catching Mistakes&rsquo; node.  (If you try this, you can return
from the &lsquo;Catching Mistakes&rsquo; node by typing <kbd>l</kbd>
(<code>Info-last</code>).)
</p>

<hr size="6">
<a name="Debugging-with-TeX"></a>
<a name="Catching-Errors-with-TeX-Formatting"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Debugging-with-Info" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-texinfo_002dshow_002dstructure" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">F.2 Catching Errors with TeX Formatting</h2>
<a name="index-Catching-errors-with-TeX-formatting"></a>
<a name="index-Debugging-with-TeX-formatting"></a>

<p>You can also catch mistakes when you format a file with TeX.
</p>
<p>Usually, you will want to do this after you have run
<code>texinfo-format-buffer</code> (or, better, <code>makeinfo-buffer</code>) on
the same file, because <code>texinfo-format-buffer</code> sometimes displays
error messages that make more sense than TeX.  (See section <a href="#Debugging-with-Info">Catching Errors with Info Formatting</a>, for more information.)
</p>
<p>For example, TeX was run on a Texinfo file, part of which is shown
here:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">---------- Buffer: texinfo.texi ----------
name of the Texinfo file as an extension.  The
@samp{??} are `wildcards' that cause the shell to
substitute all the raw index files.  (@xref{sorting
indices, for more information about sorting
indices.)@refill
---------- Buffer: texinfo.texi ----------
</pre></td></tr></table>

<p>(The cross reference lacks a closing brace.)
TeX produced the following output, after which it stopped:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">---------- Buffer: *tex-shell* ----------
Runaway argument?
{sorting indices, for more information about sorting
indices.) @refill @ETC.
! Paragraph ended before @xref was complete.
&lt;to be read again&gt;
                   @par
l.27

?
---------- Buffer: *tex-shell* ----------
</pre></td></tr></table>

<p>In this case, TeX produced an accurate and
understandable error message:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">Paragraph ended before @xref was complete.
</pre></td></tr></table>

<p>&lsquo;<samp>@par</samp>&rsquo; is an internal TeX command of no relevance to Texinfo.
&lsquo;<samp>l.27</samp>&rsquo; means that TeX detected the problem on line 27 of the
Texinfo file.  The &lsquo;<samp>?</samp>&rsquo; is the prompt TeX uses in this
circumstance.
</p>
<p>Unfortunately, TeX is not always so helpful, and sometimes you must
truly be a Sherlock Holmes to discover what went wrong.
</p>
<p>In any case, if you run into a problem like this, you can do one of three
things.
</p>
<ol>
<li>
You can tell TeX to continue running and ignore just this error by
typing &lt;RET&gt; at the &lsquo;<samp>?</samp>&rsquo; prompt.

</li><li>
You can tell TeX to continue running and to ignore all errors as best
it can by typing <kbd>r &lt;RET&gt;</kbd> at the &lsquo;<samp>?</samp>&rsquo; prompt.

<p>This is often the best thing to do.  However, beware: the one error
may produce a cascade of additional error messages as its consequences
are felt through the rest of the file.  To stop TeX when it is
producing such an avalanche of error messages, type <kbd>C-c</kbd> (or
<kbd>C-c C-c</kbd>, if you are running a shell inside Emacs).
</p>
</li><li>
You can tell TeX to stop this run by typing <kbd>x &lt;RET&gt;</kbd>
at the &lsquo;<samp>?</samp>&rsquo; prompt.
</li></ol>

<p>If you are running TeX inside Emacs, you need to switch to the shell
buffer and line at which TeX offers the &lsquo;<samp>?</samp>&rsquo; prompt.
</p>
<p>Sometimes TeX will format a file without producing error messages even
though there is a problem.  This usually occurs if a command is not ended
but TeX is able to continue processing anyhow.  For example, if you fail
to end an itemized list with the <code>@end itemize</code> command, TeX will
write a DVI file that you can print out.  The only error message that
TeX will give you is the somewhat mysterious comment that
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">(@end occurred inside a group at level 1)
</pre></td></tr></table>

<p>However, if you print the DVI file, you will find that the text
of the file that follows the itemized list is entirely indented as if
it were part of the last item in the itemized list.  The error message
is the way TeX says that it expected to find an <code>@end</code>
command somewhere in the file; but that it could not determine where
it was needed.
</p>
<p>Another source of notoriously hard-to-find errors is a missing
<code>@end group</code> command.  If you ever are stumped by
incomprehensible errors, look for a missing <code>@end group</code> command
first.
</p>
<p>If the Texinfo file lacks header lines,
TeX may stop in the
beginning of its run and display output that looks like the following.
The &lsquo;<samp>*</samp>&rsquo; indicates that TeX is waiting for input.
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">This is TeX, Version 3.14159 (Web2c 7.0)
(test.texinfo [1])
*
</pre></td></tr></table>

<p>In this case, simply type <kbd>\end &lt;RET&gt;</kbd> after the asterisk.  Then
write the header lines in the Texinfo file and run the TeX command
again. (Note the use of the backslash, &lsquo;<samp>\</samp>&rsquo;.  TeX uses &lsquo;<samp>\</samp>&rsquo;
instead of &lsquo;<samp>@</samp>&rsquo;; and in this circumstance, you are working
directly with TeX, not with Texinfo.)
</p>
<hr size="6">
<a name="Using-texinfo_002dshow_002dstructure"></a>
<a name="Using-texinfo_002dshow_002dstructure-1"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Debugging-with-TeX" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-occur" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">F.3 Using <code>texinfo-show-structure</code></h2>
<a name="index-Showing-the-structure-of-a-file"></a>
<a name="index-texinfo_002dshow_002dstructure-1"></a>

<p>It is not always easy to keep track of the nodes, chapters, sections, and
subsections of a Texinfo file.  This is especially true if you are revising
or adding to a Texinfo file that someone else has written.
</p>
<p>In GNU Emacs, in Texinfo mode, the <code>texinfo-show-structure</code>
command lists all the lines that begin with the @-commands that
specify the structure: <code>@chapter</code>, <code>@section</code>,
<code>@appendix</code>, and so on.  With an argument (<kbd>C-u</kbd>
as prefix argument, if interactive),
the command also shows the <code>@node</code> lines.  The
<code>texinfo-show-structure</code> command is bound to <kbd>C-c C-s</kbd> in
Texinfo mode, by default.
</p>
<p>The lines are displayed in a buffer called the &lsquo;<samp>*Occur*</samp>&rsquo; buffer,
indented by hierarchical level.  For example, here is a part of what was
produced by running <code>texinfo-show-structure</code> on this manual:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"> Lines matching &quot;^@\\(chapter \\|sect\\|subs\\|subh\\|
 unnum\\|major\\|chapheading \\|heading \\|appendix\\)&quot;
 in buffer texinfo.texi.
 &hellip;
 4177:@chapter Nodes
 4198:    @heading Two Paths
 4231:    @section Node and Menu Illustration
 4337:    @section The @code{@@node} Command
 4393:        @subheading Choosing Node and Pointer Names
 4417:        @subsection How to Write an @code{@@node} Line
 4469:        @subsection @code{@@node} Line Tips
 &hellip;
</pre></td></tr></table>

<p>This says that lines 4337, 4393, and 4417 of &lsquo;<tt>texinfo.texi</tt>&rsquo; begin
with the <code>@section</code>, <code>@subheading</code>, and <code>@subsection</code>
commands respectively.  If you move your cursor into the &lsquo;<samp>*Occur*</samp>&rsquo;
window, you can position the cursor over one of the lines and use the
<kbd>C-c C-c</kbd> command (<code>occur-mode-goto-occurrence</code>), to jump to
the corresponding spot in the Texinfo file.  See <a href="../emacs/Other-Repeating-Search.html#Other-Repeating-Search">(emacs)Other Repeating Search</a> section &lsquo;Using Occur&rsquo; in <cite>The GNU Emacs Manual</cite>, for more
information about <code>occur-mode-goto-occurrence</code>.
</p>
<p>The first line in the &lsquo;<samp>*Occur*</samp>&rsquo; window describes the <em>regular
expression</em> specified by <var>texinfo-heading-pattern</var>.  This regular
expression is the pattern that <code>texinfo-show-structure</code> looks for.
See <a href="../emacs/Regexps.html#Regexps">(emacs)Regexps</a> section &lsquo;Using Regular Expressions&rsquo; in <cite>The GNU Emacs Manual</cite>,
for more information.
</p>
<p>When you invoke the <code>texinfo-show-structure</code> command, Emacs will
display the structure of the whole buffer.  If you want to see the
structure of just a part of the buffer, of one chapter, for example,
use the <kbd>C-x n n</kbd> (<code>narrow-to-region</code>) command to mark the
region.  (See <a href="../emacs/Narrowing.html#Narrowing">(emacs)Narrowing</a> section &lsquo;Narrowing&rsquo; in <cite>The GNU Emacs Manual</cite>.)  This is
how the example used above was generated.  (To see the whole buffer
again, use <kbd>C-x n w</kbd> (<code>widen</code>).)
</p>
<p>If you call <code>texinfo-show-structure</code> with a prefix argument by
typing <kbd>C-u C-c C-s</kbd>, it will list lines beginning with
<code>@node</code> as well as the lines beginning with the @-sign commands
for <code>@chapter</code>, <code>@section</code>, and the like.
</p>
<p>You can remind yourself of the structure of a Texinfo file by looking at
the list in the &lsquo;<samp>*Occur*</samp>&rsquo; window; and if you have mis-named a node
or left out a section, you can correct the mistake.
</p>
<hr size="6">
<a name="Using-occur"></a>
<a name="Using-occur-1"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Using-texinfo_002dshow_002dstructure" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Info_002dValidate" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">F.4 Using <code>occur</code></h2>
<a name="index-Occurrences_002c-listing-with-_0040occur"></a>
<a name="index-occur"></a>

<p>Sometimes the <code>texinfo-show-structure</code> command produces too much
information.  Perhaps you want to remind yourself of the overall structure
of a Texinfo file, and are overwhelmed by the detailed list produced by
<code>texinfo-show-structure</code>.  In this case, you can use the <code>occur</code>
command directly.  To do this, type
</p>
<table><tr><td>&nbsp;</td><td><pre class="example"><kbd>M-x occur</kbd>
</pre></td></tr></table>

<p>and then, when prompted, type a <em>regexp</em>, a regular expression for
the pattern you want to match.  (See <a href="../emacs/Regexps.html#Regexps">(emacs)Regexps</a> section &lsquo;Regular Expressions&rsquo; in <cite>The GNU Emacs Manual</cite>.)  The <code>occur</code> command works from
the current location of the cursor in the buffer to the end of the
buffer.  If you want to run <code>occur</code> on the whole buffer, place
the cursor at the beginning of the buffer.
</p>
<p>For example, to see all the lines that contain the word
&lsquo;<samp>@chapter</samp>&rsquo; in them, just type &lsquo;<samp>@chapter</samp>&rsquo;.  This will
produce a list of the chapters.  It will also list all the sentences
with &lsquo;<samp>@chapter</samp>&rsquo; in the middle of the line.
</p>
<p>If you want to see only those lines that start with the word
&lsquo;<samp>@chapter</samp>&rsquo;, type &lsquo;<samp>^@chapter</samp>&rsquo; when prompted by
<code>occur</code>.  If you want to see all the lines that end with a word
or phrase, end the last word with a &lsquo;<samp>$</samp>&rsquo;; for example,
&lsquo;<samp>catching mistakes$</samp>&rsquo;.  This can be helpful when you want to see
all the nodes that are part of the same chapter or section and
therefore have the same &lsquo;Up&rsquo; pointer.
</p>
<p>See <a href="../emacs/Other-Repeating-Search.html#Other-Repeating-Search">(emacs)Other Repeating Search</a> section &lsquo;Using Occur&rsquo; in <cite>The GNU Emacs Manual</cite>,
for more information.
</p>
<hr size="6">
<a name="Running-Info_002dValidate"></a>
<a name="Finding-Badly-Referenced-Nodes"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Using-occur" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-Info_002dvalidate" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h2 class="section">F.5 Finding Badly Referenced Nodes</h2>
<a name="index-Info_002dvalidate"></a>
<a name="index-Nodes_002c-checking-for-badly-referenced"></a>
<a name="index-Checking-for-badly-referenced-nodes"></a>
<a name="index-Looking-for-badly-referenced-nodes"></a>
<a name="index-Finding-badly-referenced-nodes"></a>
<a name="index-Badly-referenced-nodes"></a>

<p>You can use the <code>Info-validate</code> command to check whether any of
the &lsquo;Next&rsquo;, &lsquo;Previous&rsquo;, &lsquo;Up&rsquo; or other node pointers fail to point to a
node.  This command checks that every node pointer points to an
existing node.  The <code>Info-validate</code> command works only on Info
files, not on Texinfo files.
</p>
<p>The <code>makeinfo</code> program validates pointers automatically, so you
do not need to use the <code>Info-validate</code> command if you are using
<code>makeinfo</code>.  You only may need to use <code>Info-validate</code> if you
are unable to run <code>makeinfo</code> and instead must create an Info file
using <code>texinfo-format-region</code> or <code>texinfo-format-buffer</code>, or
if you write an Info file from scratch.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Using-Info_002dvalidate">F.5.1 Running <code>Info-validate</code></a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         How to run <code>Info-validate</code>.
</td></tr>
<tr><td align="left" valign="top"><a href="#Unsplit">F.5.2 Creating an Unsplit File</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                     How to create an unsplit file.
</td></tr>
<tr><td align="left" valign="top"><a href="#Tagifying">F.5.3 Tagifying a File</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   How to tagify a file.
</td></tr>
<tr><td align="left" valign="top"><a href="#Splitting">F.5.4 Splitting a File Manually</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   How to split a file manually.
</td></tr>
</table>

<hr size="6">
<a name="Using-Info_002dvalidate"></a>
<a name="Running-Info_002dvalidate"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Running-Info_002dValidate" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Unsplit" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Info_002dValidate" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.5.1 Running <code>Info-validate</code></h3>
<a name="index-Running-Info_002dvalidate"></a>
<a name="index-Info-validating-a-large-file"></a>
<a name="index-Validating-a-large-file"></a>

<p>To use <code>Info-validate</code>, visit the Info file you wish to check and
type:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">M-x Info-validate
</pre></td></tr></table>

<p>Note that the <code>Info-validate</code> command requires an upper case
&lsquo;I&rsquo;.  You may also need to create a tag table before running
<code>Info-validate</code>.  See section <a href="#Tagifying">Tagifying a File</a>.
</p>
<p>If your file is valid, you will receive a message that says &ldquo;File appears
valid&rdquo;.  However, if you have a pointer that does not point to a node,
error messages will be displayed in a buffer called &lsquo;<samp>*problems in
info file*</samp>&rsquo;.
</p>
<p>For example, <code>Info-validate</code> was run on a test file that contained
only the first node of this manual.  One of the messages said:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">In node &quot;Overview&quot;, invalid Next: Texinfo Mode
</pre></td></tr></table>

<p>This meant that the node called &lsquo;<samp>Overview</samp>&rsquo; had a &lsquo;Next&rsquo; pointer that
did not point to anything (which was true in this case, since the test file
had only one node in it).
</p>
<p>Now suppose we add a node named &lsquo;<samp>Texinfo Mode</samp>&rsquo; to our test case
but we do not specify a &lsquo;Previous&rsquo; for this node.  Then we will get
the following error message:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">In node &quot;Texinfo Mode&quot;, should have Previous: Overview
</pre></td></tr></table>

<p>This is because every &lsquo;Next&rsquo; pointer should be matched by a
&lsquo;Previous&rsquo; (in the node where the &lsquo;Next&rsquo; points) which points back.
</p>
<p><code>Info-validate</code> also checks that all menu entries and cross references
point to actual nodes.
</p>
<p><code>Info-validate</code> requires a tag table and does not work with files
that have been split.  (The <code>texinfo-format-buffer</code> command
automatically splits large files.)  In order to use <code>Info-validate</code>
on a large file, you must run <code>texinfo-format-buffer</code> with an
argument so that it does not split the Info file; and you must create a
tag table for the unsplit file.
</p>
<hr size="6">
<a name="Unsplit"></a>
<a name="Creating-an-Unsplit-File"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Using-Info_002dvalidate" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Tagifying" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Info_002dValidate" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.5.2 Creating an Unsplit File</h3>
<a name="index-Creating-an-unsplit-file"></a>
<a name="index-Unsplit-file-creation"></a>

<p>You can run <code>Info-validate</code> only on a single Info file that has a
tag table.  The command will not work on the indirect subfiles that
are generated when a master file is split.  If you have a large file
(longer than 70,000 bytes or so), you need to run the
<code>texinfo-format-buffer</code> or <code>makeinfo-buffer</code> command in such
a way that it does not create indirect subfiles.  You will also need
to create a tag table for the Info file.  After you have done this,
you can run <code>Info-validate</code> and look for badly referenced
nodes.
</p>
<p>The first step is to create an unsplit Info file.  To prevent
<code>texinfo-format-buffer</code> from splitting a Texinfo file into
smaller Info files, give a prefix to the <kbd>M-x
texinfo-format-buffer</kbd> command:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">C-u M-x texinfo-format-buffer
</pre></td></tr></table>

<p>or else
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">C-u C-c C-e C-b
</pre></td></tr></table>

<p>When you do this, Texinfo will not split the file and will not create
a tag table for it. 
<a name="index-Making-a-tag-table-manually"></a>
<a name="index-Tag-table_002c-making-manually"></a>
</p>
<hr size="6">
<a name="Tagifying"></a>
<a name="Tagifying-a-File"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Unsplit" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Splitting" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Info_002dValidate" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.5.3 Tagifying a File</h3>

<p>After creating an unsplit Info file, you must create a tag table for
it.  Visit the Info file you wish to tagify and type:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">M-x Info-tagify
</pre></td></tr></table>

<p>(Note the upper case &lsquo;<samp>I</samp>&rsquo; in <code>Info-tagify</code>.)  This creates an
Info file with a tag table that you can validate.
</p>
<p>The third step is to validate the Info file:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">M-x Info-validate
</pre></td></tr></table>

<p>(Note the upper case &lsquo;<samp>I</samp>&rsquo; in <code>Info-validate</code>.)
In brief, the steps are:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">C-u M-x texinfo-format-buffer
M-x Info-tagify
M-x Info-validate
</pre></td></tr></table>

<p>After you have validated the node structure, you can rerun
<code>texinfo-format-buffer</code> in the normal way so it will construct a
tag table and split the file automatically, or you can make the tag
table and split the file manually.
</p>
<hr size="6">
<a name="Splitting"></a>
<a name="Splitting-a-File-Manually"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Tagifying" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Running-Info_002dValidate" title="Up section"> Up </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<h3 class="subsection">F.5.4 Splitting a File Manually</h3>
<a name="index-Splitting-an-Info-file-manually"></a>
<a name="index-Info-file_002c-splitting-manually"></a>

<p>You should split a large file or else let the
<code>texinfo-format-buffer</code> or <code>makeinfo-buffer</code> command do it
for you automatically.  (Generally you will let one of the formatting
commands do this job for you.  See section <a href="texinfo_21.html#Creating-an-Info-File">Creating an Info File</a>.)
</p>
<p>The split-off files are called the indirect subfiles.
</p>
<p>Info files are split to save memory.  With smaller files, Emacs does not
have make such a large buffer to hold the information.
</p>
<p>If an Info file has more than 30 nodes, you should also make a tag
table for it. See section <a href="#Using-Info_002dvalidate">Running <code>Info-validate</code></a>, for information
about creating a tag table.  (Again, tag tables are usually created
automatically by the formatting command; you only need to create a tag
table yourself if you are doing the job manually.  Most likely, you
will do this for a large, unsplit file on which you have run
<code>Info-validate</code>.)
</p>

<p>Visit the Info file you wish to tagify and split and type the two
commands:
</p>
<table><tr><td>&nbsp;</td><td><pre class="example">M-x Info-tagify
M-x Info-split
</pre></td></tr></table>

<p>(Note that the &lsquo;<samp>I</samp>&rsquo; in &lsquo;<samp>Info</samp>&rsquo; is upper case.)
</p>
<p>When you use the <code>Info-split</code> command, the buffer is modified into a
(small) Info file which lists the indirect subfiles.  This file should be
saved in place of the original visited file.  The indirect subfiles are
written in the same directory the original file is in, with names generated
by appending &lsquo;<samp>-</samp>&rsquo; and a number to the original file name.
</p>
<p>The primary file still functions as an Info file, but it contains just
the tag table and a directory of subfiles.
</p>

<hr size="6">
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Catching-Mistakes" title="Beginning of this chapter or previous chapter"> &lt;&lt; </a>]</td>
<td valign="middle" align="left">[<a href="texinfo_28.html#Refilling-Paragraphs" title="Next chapter"> &gt;&gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="texinfo.html#Top" title="Cover (top) of document">Top</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_toc.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_32.html#Command-and-Variable-Index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="texinfo_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>a tester</em> on <em>a sunny day</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html</em></a>.
 </font>
 <br>

</p>
</body>
</html>
