<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Copyright (C) 2004, 2005, 2006, 2007 Alain Lahellec

Copyright (C) 2004, 2005, 2006, 2007 Patrice Dumas

Copyright (C) 2004, Ste'phane Hallegatte

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with no Front-Cover text and with no Back-Cover Text.  
A copy of the license is included in the section entitled "GNU Free 
Documentation License."

 -->
<!-- Created on a sunny day by texi2html
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>Miniker 102 manual: 3.10 Programming with cmz directives</title>

<meta name="description" content="Miniker 102 manual: 3.10 Programming with cmz directives">
<meta name="keywords" content="Miniker 102 manual: 3.10 Programming with cmz directives">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
<!--
@import "mini_ker_tex4ht_math.css";
@import "mini_ker_tex4ht_tex.css";

a.summary-letter {text-decoration: none}
blockquote.smallquotation {font-size: smaller}
pre.display {font-family: serif}
pre.format {font-family: serif}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: serif; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: serif; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.roman {font-family:serif; font-weight:normal;}
span.sansserif {font-family:sans-serif; font-weight:normal;}
ul.toc {list-style: none}
-->
</style>


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">

<a name="Programming-with-cmz-directives"></a>
<ul class="toc"><li><a href="index.html#Top">Miniker 102 manual</a> </li>
<li><ul class="toc"><li><a href="Advanced-programming.html#Advanced-programming">3 Advanced Miniker programming</a> </li>
</ul></li>
</ul>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="Explicit-model-size.html#Model-with-explicit-size" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Cmz-directives-used-with-Miniker" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="index.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="Concepts-index.html#Concepts-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="mini_ker_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Programming-with-cmz-directives-1"></a>
<h2 class="section"> 3.10 Programming with cmz directives </h2>
<ul class="toc">
<li> <a href="#Cmz-directives-used-with-Miniker">3.10.1 Cmz directives used with Miniker</a> </li>
<li> <a href="#Using-cmz-directives-in-Miniker">3.10.2 Using cmz directives in Miniker</a> </li>
</ul>


<hr>
<a name="Cmz-directives-used-with-Miniker"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Programming-with-cmz-directives" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="#Using-cmz-directives-in-Miniker" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="index.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="Concepts-index.html#Concepts-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="mini_ker_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Cmz-directives-used-with-Miniker-1"></a>
<h3 class="subsection"> 3.10.1 Cmz directives used with Miniker </h3>

<p>The main feature of cmz directive is to use code conditionnaly for a given
select flag. For example when the double precision is selected
(see <a href="Double-precision.html#Double-precision">Double precision</a>) the use of the conditionnal 
<code>double</code> flag may be required in case there is a different subroutine 
name for different types. If, for example, the user use the subroutine
<code>smysub</code> for simple precision and <code>dmysub</code> for double
precision the following code is an example of what could appear in the
user code:
</p>
<pre class="verbatim">+IF,double
 call dmysub(eta);
+ELSE
 call smysub(eta);
+ENDIF
</pre>
<p>For a complete reference on cmz directives see the appendix
<a href="Cmz-directives-reference.html#Cmz-directives-reference">Cmz directives reference</a>.
</p>
<hr>
<a name="Using-cmz-directives-in-Miniker"></a>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="#Cmz-directives-used-with-Miniker" title="Previous section in reading order"> &lt; </a>]</td>
<td valign="middle" align="left">[<a href="Dynamic-system-analysis.html#Dynamic-system-analysis" title="Next section in reading order"> &gt; </a>]</td>
<td valign="middle" align="left"> &nbsp; </td>
<td valign="middle" align="left">[<a href="index.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="Concepts-index.html#Concepts-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="mini_ker_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<a name="Using-cmz-directives-in-Miniker-1"></a>
<h3 class="subsection"> 3.10.2 Using cmz directives in Miniker </h3>

<p>In cmz the KEEP and DECK have their cmz directives preprocessed as part
of the source files extraction. And the +KEEP and +DECK 
directives are automatically
set when creating the KEEP or DECK. With make, files with these directives 
has to be created within the files that are to be preprocessed by the
cmz directives preprocessor.
</p>
<p>To be processed by make, a file that contains cmz directives 
should have a file suffix corresponding
with the language of the resulting file and with the normal file suffix of
that language. More precisely &lsquo;<samp>cm</samp>&rsquo; should be added before the normal
file suffix and after the &lsquo;<samp>.</samp>&rsquo;. Therefore if the resulting file language
is associated with a suffix &lsquo;<samp>.<var>suf</var></samp>&rsquo;, the file with cmz directives
should have a &lsquo;<samp>.cm<var>suf</var></samp>&rsquo; suffix. The tradition is to have
a different suffix for main files and include files. 
To add directories searched for <em>cmfiles</em> (files with cmz directives) 
they should be added to the <code>CMFDIRS</code> makefile variable, separated 
by &lsquo;<samp>:</samp>&rsquo;.
</p>
<p>Rules for preprocessing of the files are defined in the file 
&lsquo;<tt>Makefile.miniker</tt>&rsquo; for the file types described in 
<a href="#tab_003acmfile_005fsuffix">table 3.2</a>:
</p>
<div class="float"><a name="tab_003acmfile_005fsuffix"></a>
<table>
<thead><tr><th>language</th><th>file type</th><th>cmfile suffix</th><th>suffix</th><th>language</th></tr></thead>
<tr><td>fortran</td><td>main/deck</td><td>.cmf</td><td>.f</td><td>ftn</td></tr>
<tr><td>fortran preprocessed</td><td>main/deck</td><td>.cmF</td><td>.F</td><td>f77</td></tr>
<tr><td>fortran preprocessed</td><td>include/keep</td><td>.cminc</td><td>.inc</td><td>f77</td></tr>
<tr><td>mortran</td><td>main/deck</td><td>.cmmtn</td><td>.mtn</td><td>mtn</td></tr>
<tr><td>mortran</td><td>include/keep</td><td>.cmmti</td><td>.mti</td><td>mtn</td></tr>
</table>

</div><p><strong>table 3.2: Association between file language, file type, file suffixes and 
language identifier in cmz directives. A main file is called a <em>deck</em>
in cmz and an include file is called a <em>keep</em>.
</strong>
</p>
<hr>
<table cellpadding="1" cellspacing="1" border="0">
<tr><td valign="middle" align="left">[<a href="index.html#SEC_Contents" title="Table of contents">Contents</a>]</td>
<td valign="middle" align="left">[<a href="Concepts-index.html#Concepts-index" title="Index">Index</a>]</td>
<td valign="middle" align="left">[<a href="mini_ker_abt.html#SEC_About" title="About (help)"> ? </a>]</td>
</tr></table>
<p>
 <font size="-1">
  This document was generated by <em>a tester</em> on <em>a sunny day</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html</em></a>.
 </font>
 <br>

</p>
</body>
</html>
